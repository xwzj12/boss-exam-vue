webpackJsonp([29],{GaeI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"Paper",created:function(){var t=this;localStorage.setItem("Authorization","eyJhbGciOiJIUzI1NiJ9.eyJjb21wYW55SWQiOiIzNjY4MDUyMjE0NDY2NDc4MDgiLCJjb2RlIjoiMTkxMDUwNTQzMEBxcS5jb20iLCJ1cGRhdGVkQnkiOiI0MTI3NzgwNDk1NzY1NTA0MDAiLCJjcmVhdGVkQnkiOiI0MTI3NzgwNDk1NzY1NTA0MDAiLCJpcCI6IjEyNy4wLjAuMSIsImlzcyI6Im1vb2NfdXNlciIsIm5hbWUiOiLkuJPkuJrkurrlkZgiLCJleHAiOjE1OTEwODIwNDAsInVzZXJJZCI6IjQxMjc3ODA0OTU3NjU1MDQwMCIsIm9yZ0lkIjoiMzY2ODA1MTU1MzIzNDQ1MjQ4In0.NYKqFATBkSpUGQu0GKSibQcBtqG7XyrM24NXQjZPUx4"),this.templateFlag=this.$route.query.templateFlag,this.updataFlag=this.$route.query.updataFlag,this.pageId=this.$route.query.pageId,this.pageName=this.$route.query.pageName,this.$ajax.post("getTestPaperController",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{id:this.pageId}}}).then(function(e){console.log(e),t.subjectData=e.data.body.data.subjectPojoList,t.answerData=e.data.body.data.answerPojosList,console.log(t.subjectData),console.log(t.answerData)},function(){console.log("error")})},methods:{getCookie:function(){if(document.cookie.length>0)for(var t=document.cookie.split("; "),e=0;e<t.length;e++){var a=t[e].split("=");if("staffToken"===a[0])return a[1]}else alert("登录超时!"),this.$router.push({path:"/Login",name:"Login",params:{}})},open1:function(t){this.dialogFormVisible1=!0,this.form1.id=this.subjectData[t].id,this.form1.subject=this.subjectData[t].subject,this.form1.score=this.subjectData[t].score},open2:function(t){this.dialogFormVisible2=!0,this.form2.id=this.subjectData[t].id},open3:function(t,e){this.dialogFormVisible3=!0,this.form3.id=this.answerData[e].id,this.form3.answer=this.answerData[e].answer},updataSubject:function(){var t=this;this.$ajax.post("updataSubjectController",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{paperId:this.pageId,subjectId:this.form1.id,subject:this.form1.subject,score:this.form1.score}}}).then(function(e){console.log(e),t.subjectData=e.data.body.data.subjectPojoList,t.answerData=e.data.body.data.answerPojosList,console.log(t.subjectData),console.log(t.answerData)},function(){console.log("error")}),this.dialogFormVisible1=!1},updataAnswer:function(){var t=this;this.$ajax.post("updataAnswerController",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{paperId:this.pageId,answerId:this.form3.id,answer:this.form3.answer}}}).then(function(e){console.log(e),t.subjectData=e.data.body.data.subjectPojoList,t.answerData=e.data.body.data.answerPojosList,console.log(t.subjectData),console.log(t.answerData)},function(){console.log("error")}),this.dialogFormVisible3=!1},check:function(t){var e=this;this.$ajax.post("checkController",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{paperId:this.pageId,answerId:this.answerData[t].id,rightAnswer:this.answerData[t].rightAnswer}}}).then(function(t){console.log(t),e.subjectData=t.data.body.data.subjectPojoList,e.answerData=t.data.body.data.answerPojosList,console.log(e.subjectData),console.log(e.answerData)},function(){console.log("error")})},deleteAnswer:function(t){var e=this;this.$ajax.post("deleteAnswerController",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{paperId:this.pageId,answerId:this.answerData[t].id}}}).then(function(t){console.log(t),e.subjectData=t.data.body.data.subjectPojoList,e.answerData=t.data.body.data.answerPojosList,console.log(e.subjectData),console.log(e.answerData)},function(){console.log("error")})},insertAnswer:function(){var t=this;this.$ajax.post("insertAnswerController",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{paperId:this.pageId,subjectId:this.form2.id,answer:this.form2.answer}}}).then(function(e){console.log(e),t.subjectData=e.data.body.data.subjectPojoList,t.answerData=e.data.body.data.answerPojosList,console.log(t.subjectData),console.log(t.answerData)},function(){console.log("error")}),this.dialogFormVisible2=!1}},data:function(){return{templateFlag:"",updataFlag:"",pageId:"",pagaName:"",subjectData:[{}],answerData:[{}],dialogFormVisible1:!1,dialogFormVisible2:!1,dialogFormVisible3:!1,form1:{id:"",subject:"",score:""},form2:{id:"",answer:""},form3:{id:"",answer:""}}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paper"},[a("div",{staticClass:"flag"},[a("span",[a("h2",[t._v("PageName: "+t._s(this.pageName))])]),t._v(" "),a("span",[t._v("PageId: "+t._s(this.pageId))])]),t._v(" "),t._l(t.subjectData,function(e,o){return a("div",{key:e,staticClass:"subject"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(o)+".)"+t._s(e.subject)+"(分数："+t._s(e.score)+",试题ID："+t._s(e.id)+")")]),t._v(" "),"1"==t.updataFlag?a("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",icon:"el-icon-plus",circle:""},on:{click:function(e){return t.open2(o)}}}):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"添加答案",visible:t.dialogFormVisible2},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[a("el-form",{attrs:{model:t.form2}},[a("el-form-item",{attrs:{label:"试题ID","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:t.form2.id,callback:function(e){t.$set(t.form2,"id",e)},expression:"form2.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"答案描述","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form2.answer,callback:function(e){t.$set(t.form2,"answer",e)},expression:"form2.answer"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.insertAnswer()}}},[t._v("确 定")])],1)],1),t._v(" "),"1"==t.updataFlag?a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){return t.open1(o)}}}):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"修改试题",visible:t.dialogFormVisible1},on:{"update:visible":function(e){t.dialogFormVisible1=e}}},[a("el-form",{attrs:{model:t.form1}},[a("el-form-item",{attrs:{label:"试题ID","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:t.form1.id,callback:function(e){t.$set(t.form1,"id",e)},expression:"form1.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"题目描述","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form1.subject,callback:function(e){t.$set(t.form1,"subject",e)},expression:"form1.subject"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分值","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form1.score,callback:function(e){t.$set(t.form1,"score",e)},expression:"form1.score"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible1=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updataSubject()}}},[t._v("确 定")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-bottom":"18px"}},[t._v(t._s(e.name))]),t._v(" "),t._l(t.answerData,function(i,s){return a("div",{key:i,staticClass:"text item"},[i.paperSubjectId==e.id?a("div",{staticClass:"text item"},[a("p",{staticStyle:{padding:"0px",margin:"0px",display:"inline"}},[t._v("("+t._s(s)+")."+t._s(i.answer))]),t._v(" "),"1"==t.updataFlag?a("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.deleteAnswer(s)}}}):t._e(),t._v(" "),"1"==t.updataFlag?a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(e){return t.open3(o,s)}}}):t._e(),t._v(" "),"1"==t.updataFlag&&"0"==i.rightAnswer?a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(e){return t.check(s)}}}):t._e(),t._v(" "),"1"==t.updataFlag&&"1"==i.rightAnswer?a("el-button",{staticStyle:{float:"right"},attrs:{type:"info",icon:"el-icon-close",circle:"",size:"mini"},on:{click:function(e){return t.check(s)}}}):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"修改答案",visible:t.dialogFormVisible3},on:{"update:visible":function(e){t.dialogFormVisible3=e}}},[a("el-form",{attrs:{model:t.form2}},[a("el-form-item",{attrs:{label:"试题ID","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:t.form3.id,callback:function(e){t.$set(t.form3,"id",e)},expression:"form3.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"答案描述","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form3.answer,callback:function(e){t.$set(t.form3,"answer",e)},expression:"form3.answer"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible3=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updataAnswer()}}},[t._v("确 定")])],1)],1)],1):t._e()])})],2)],1)})],2)},staticRenderFns:[]};var s=a("VU/8")(o,i,!1,function(t){a("PpIi")},"data-v-4fd1a809",null);e.default=s.exports},PpIi:function(t,e){}});