webpackJsonp([19],{G87M:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("Z0lD"),i={data:function(){return{tableData:[],multipleSelection:[],dialogTableVisible2:!1,dialogFormVisible2:!1,dialogTableVisible:!1,dialogFormVisible:!1,modifyForm:{id:"",code:"",name:"",password:"",companyId:"",departmentId:"",sex:"",birthday:"",positionId:"",tel:"",email:"",other:"",version:"",status:"",remark:"",roleIds:[]},formLabelWidth:"120px",addForm:{id:"",code:"",name:"",password:"",companyId:"",departmentId:"",sex:"",birthday:"",positionId:"",tel:"",email:"",other:"",version:"",status:"",remark:"",roleIds:[]},rules:{name:[{required:!0,message:"请输入用户名！",trigger:"blur"}],code:[{required:!0,message:"请输入工号！",trigger:"blur"}],password:[{required:!0,message:"请输入密码！",trigger:"blur"}],companyId:[{required:!0,message:"请选择公司",trigger:"blur"}],departmentId:[{required:!0,message:"请选择部门",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],birthday:[{required:!0,message:"请选择生日",trigger:"blur"}],positionId:[{required:!0,message:"请选择职位",trigger:"blur"}],tel:[{required:!0,message:"请输入电话",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],other:[{required:!0,message:"请输入其他联系方式",trigger:"blur"}],orgId:[{required:!0,message:"请输入所属机构",trigger:"blur"}],status:[{required:!0,message:"请选择是否启用",trigger:"blur"}]},page:1,pageSize:5,count:0,param:"",paramType:"",dialogVisible:!1,deleteId:"",deleteVersion:-1,code:"",tel:"",name:"",RoleValue:[],dialogRoleAndUserMatchingVisible:!1,userNames:[],companyName:"",companyId:"",departmentName:"",departmentId:"",DepartmentIdAndName:[],companyIdAndName:[],PositionIdAndName:"",roleTree:"",RoleIdAndNameOptions:[],status:null,statusList:[{label:"全部",value:null},{label:"是",value:1},{label:"否",value:0}]}},methods:{evaluationModifyForm:function(e){void 0!=this.$refs.modifyForm&&this.$refs.modifyForm.clearValidate(),console.log(e),this.modifyForm.id=e.id,null!=e.departmentId?(this.modifyForm.companyId=e.departmentId.companyId.id,this.modifyForm.departmentId=e.departmentId.id):(this.modifyForm.companyId=null,this.modifyForm.departmentId=null),1!=this.companyIdAndName.length&&(this.getDepartmentIdAndNameByCompanyID(this.modifyForm.companyId),this.getPositionIdAndNameByCompanyID(this.modifyForm.departmentId),this.getRoleIdAndNameByCompanyID(this.modifyForm.companyId)),this.modifyForm.name=e.name,this.modifyForm.code=e.code,this.modifyForm.password=e.password,this.modifyForm.sex=e.sex,this.modifyForm.birthday=e.birthday,this.modifyForm.positionId=e.positionId.id,this.modifyForm.tel=e.tel,this.modifyForm.email=e.email,this.modifyForm.other=e.other,this.modifyForm.remark=e.remark,this.modifyForm.version=e.version,this.modifyForm.status=e.status,this.modifyForm.roleIds=e.roleIds},getRowKeys:function(e){return e.id},handleEdit:function(e,t){this.dialogFormVisible2=!0,this.dialogTableVisible2=!0,this.evaluationModifyForm(t)},handledbClick:function(e,t,o){this.handleEdit(0,e)},getdata:function(){var e=this,t=[];0!=this.RoleValue.length&&this.RoleValue.forEach(function(e){t.push(e)}),this.$ajax.post("gateway/systemModule/doQueryUserByPage",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{name:this.name,code:this.code,tel:this.tel,status:this.status,roleId:t,page:this.page,pageSize:this.pageSize}}}).then(function(t){e.count=t.data.body.data.count,e.tableData=t.data.body.data.userList},function(){console.log("error")})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.pageSize=e,this.getdata()},handleCurrentChange:function(e){this.page=e,this.getdata()},queryDataByName:function(){this.page=1,this.getdata()},checkModifySelectOne:function(){1==this.multipleSelection.length?(this.dialogFormVisible2=!0,this.evaluationModifyForm(this.multipleSelection[0])):alert("请选中一行数据！")},updateUserData:function(){var e=this;this.$ajax.post("gateway/systemModule/doUpdateUser",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{id:this.modifyForm.id,name:this.modifyForm.name,code:this.modifyForm.code,password:this.modifyForm.password,departmentId:this.modifyForm.departmentId,sex:this.modifyForm.sex,birthday:this.modifyForm.birthday,positionId:this.modifyForm.positionId,tel:this.modifyForm.tel,email:this.modifyForm.email,other:this.modifyForm.other,remark:this.modifyForm.remark,status:this.modifyForm.status,image:null,version:this.modifyForm.version,companyId:this.modifyForm.companyId,roleIds:this.modifyForm.roleIds}}}).then(function(t){alert(t.data.head.message),"0"==t.data.head.responseCode&&(e.$refs.multipleTable.clearSelection(),e.dialogFormVisible2=!1,e.reflashTree(),e.getdata())},function(){alert("保存失败"),this.dialogFormVisible2=!1,console.log("error")})},clearAddForm:function(){void 0!=this.$refs.addForm&&this.$refs.addForm.clearValidate(),this.addForm.id="",this.addForm.name="",this.addForm.code=this.createUniqueId(),this.addForm.password="123456",this.addForm.departmentId="",this.addForm.sex="",this.addForm.birthday="",this.addForm.positionId="",this.addForm.tel="",this.addForm.email="",this.addForm.other="",this.addForm.remark="",this.addForm.version="",this.addForm.status="",1==this.companyIdAndName.length?this.addForm.companyId=this.companyIdAndName[0].value:(this.addForm.companyId="",this.PositionIdAndName=[],this.DepartmentIdAndName=[],this.RoleIdAndNameOptions=[]),this.dialogFormVisible=!0},addUserData:function(){var e=this;this.$ajax.post("gateway/systemModule/doAddUser",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{name:this.addForm.name,code:this.addForm.code,password:this.addForm.password,departmentId:this.addForm.departmentId,sex:this.addForm.sex,birthday:this.addForm.birthday,positionId:this.addForm.positionId,tel:this.addForm.tel,email:this.addForm.email,other:this.addForm.other,remark:this.addForm.remark,status:this.addForm.status,image:null,companyId:this.addForm.companyId,roleIds:this.addForm.roleIds}}}).then(function(t){alert(t.data.head.message),"0"==t.data.head.responseCode&&(e.dialogFormVisible=!1,e.reflashTree(),e.getdata())},function(){alert("增加失败"),console.log("error")})},createUniqueId:function(){var e=function(){return Number(Math.random().toString().substr(2)).toString(36)},t=[];function o(){var a=e(),i=!1;t.forEach(function(e){e===a&&(i=!0)}),i?o():t.push(a)}for(var a=0;a<1;)o(),a++;return this.uniqueId=t[0],t[0]},checkDelete:function(e){this.deleteId=e.id,this.deleteVersion=e.version,this.dialogVisible=!0},deleteUserData:function(){var e=this;this.dialogVisible=!1,this.$ajax.post("gateway/systemModule/doDeleteUser",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{id:this.deleteId,version:this.deleteVersion}}}).then(function(t){alert(t.data.head.message),"0"==t.data.head.responseCode&&(e.$refs.multipleTable.clearSelection(),e.reflashTree(),e.getdata())},function(){alert("删除失败"),console.log("error")})},checkDeleteSelect:function(){var e=this;0==this.multipleSelection.length?alert("请选择数据！"):this.$confirm("确定删除选中数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.multipleSelection.forEach(function(e){t.push({id:e.id,version:e.version})}),e.$ajax.post("gateway/systemModule/doDeleteUserList",{head:{version:"1",token:e.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{userList:t}}}).then(function(t){alert(t.data.head.message),"0"==t.data.head.responseCode&&(e.$refs.multipleTable.clearSelection(),e.reflashTree(),e.getdata())},function(){alert("删除失败"),console.log("error")})}).catch(function(){})},reflashTree:function(){this.$emit("reflashTree")},formatDate:function(e,t){if(null!=e[t.property]){var o=e[t.property],a=new Date(o);return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}},getUser_RoleDataByUserID:function(e){var t=this;this.$ajax.post("gateway/systemModule/doQueryUser_RoleLeafByUserId",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{userId:e}}}).then(function(e){var o=[];t.$refs.roleTree.setCheckedKeys(o),e.data.body.data.forEach(function(e){o.push(e.roleId)}),t.$refs.roleTree.setCheckedKeys(o)},function(){alert("error"),console.log("error")})},getRoleNameTreeByCompanyID:function(e){var t=this;this.$ajax.post("gateway/systemModule/doQueryRoleNameTreeByCompanyId",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{companyId:e}}}).then(function(e){t.roleTree=e.data.body.data},function(){console.log("error")})},checkUserMatchRoleSelect:function(){var e=this;if(0==this.multipleSelection.length)alert("请至少选择一行数据！");else{this.userNames=[],this.multipleSelection.forEach(function(t){e.userNames.push({name:t.name,id:t.id})});for(var t=0,o=0;o<this.multipleSelection.length-1;o++)if(1!=t)for(var a=o+1;a<this.multipleSelection.length;a++)1!=t&&(null!=this.multipleSelection[o].departmentId&&null!=this.multipleSelection[a].departmentId?this.multipleSelection[o].departmentId.companyId.id!=this.multipleSelection[a].departmentId.companyId.id&&(t=1):t=1);if(1==t)return void alert("请不要选择多个不同公司的用户");var i=null;null!=this.multipleSelection[0].departmentId&&(i=this.multipleSelection[0].departmentId.companyId.id),this.getRoleNameTreeByCompanyID(i),this.dialogRoleAndUserMatchingVisible=!0,1==this.multipleSelection.length?this.getUser_RoleDataByUserID(this.multipleSelection[0].id):this.$refs.roleTree.setCheckedKeys([])}},addUser_RoleData:function(){var e=this,t=this.$refs.roleTree.getCheckedKeys().concat(this.$refs.roleTree.getHalfCheckedKeys()),o=[];this.userNames.forEach(function(e){o.push(e.id)}),this.$ajax.post("gateway/systemModule/doAddNewUserToRole",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{userIds:o,roleIds:t}}}).then(function(t){alert(t.data.head.message),"0"==t.data.head.responseCode&&(e.dialogRoleAndUserMatchingVisible=!1,e.getdata())},function(){alert("error"),console.log("error")})},selectOnetUser_RoleData:function(e){var t=null;null!=e.departmentId&&(t=e.departmentId.companyId.id),this.getRoleNameTreeByCompanyID(t),this.dialogRoleAndUserMatchingVisible=!0,this.userNames=[],this.userNames.push({name:e.name,id:e.id}),this.getUser_RoleDataByUserID(e.id)},updateSubmitForm:function(){var e=this;this.$refs.modifyForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.updateUserData()})},addSubmitForm:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.addUserData()})},getCompanyIdAndName:function(){var e=this;this.$ajax.post("gateway/systemModule/queryCompanyIdAndName",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{}}}).then(function(t){e.companyIdAndName=t.data.body.data,1==e.companyIdAndName.length&&(e.getDepartmentIdAndNameByCompanyID(e.companyIdAndName[0].value),e.getPositionIdAndNameByCompanyID(e.companyIdAndName[0].value),e.getRoleIdAndNameByCompanyID(e.companyIdAndName[0].value))},function(){console.log("error")})},getDepartmentIdAndNameByCompanyID:function(e){var t=this;this.$ajax.post("gateway/systemModule/doQueryDepartmentNameByCompanyId",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{companyId:e}}}).then(function(e){t.DepartmentIdAndName=e.data.body.data},function(){console.log("error")})},getPositionIdAndNameByCompanyID:function(e){var t=this;this.$ajax.post("gateway/systemModule/doQueryPostionIdAndNameByCompanyId",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{companyId:e}}}).then(function(e){t.PositionIdAndName=e.data.body.data},function(){console.log("error")})},reflashDepartemntAdd:function(){this.getDepartmentIdAndNameByCompanyID(this.addForm.companyId),this.getPositionIdAndNameByCompanyID(this.addForm.companyId),this.getRoleIdAndNameByCompanyID(this.addForm.companyId),this.addForm.departmentId=null,this.addForm.positionId=null,this.addForm.roleIds=[]},reflashDepartemntModify:function(){this.getDepartmentIdAndNameByCompanyID(this.modifyForm.companyId),this.getPositionIdAndNameByCompanyID(this.modifyForm.companyId),this.getRoleIdAndNameByCompanyID(this.modifyForm.companyId),this.modifyForm.departmentId=null,this.modifyForm.positionId=null,this.modifyForm.roleIds=[]},getRoleIdAndNameByCompanyID:function(e){var t=this;this.$ajax.post("gateway/systemModule/doQueryRoleIdAndName",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:e}}).then(function(e){t.RoleIdAndNameOptions=e.data.body.data},function(){console.log("error")})},getCookie:function(){if(document.cookie.length>0)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var o=e[t].split("=");if("staffToken"==o[0])return o[1]}else alert("登录超时!"),this.$router.push({path:"/Login",name:"Login",params:{}})}},components:{},created:function(){this.getdata(),this.getCompanyIdAndName()},afterCreate:function(){},props:["RoleIdAndName"]},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticStyle:{float:"left","margin-bottom":"20px"}},[o("div",{staticStyle:{floar:"left"},attrs:{id:"selector"}},[o("span",[e._v("用户名称:")]),e._v(" "),o("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入内容"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),o("span",[e._v("工号:")]),e._v(" "),o("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入内容"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e._v(" "),o("span",[e._v("手机号:")]),e._v(" "),o("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入内容"},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}}),e._v(" "),o("span",[e._v("角色:")]),e._v(" "),o("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.RoleValue,callback:function(t){e.RoleValue=t},expression:"RoleValue"}},e._l(e.RoleIdAndName,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("span",[e._v("是否启用:")]),e._v(" "),o("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusList,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.queryDataByName()}}},[e._v("搜索")])],1),e._v(" "),o("div",{staticStyle:{float:"left"}},[o("el-button-group",[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.clearAddForm}},[e._v("增加")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-edit"},on:{click:e.checkModifySelectOne}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:e.checkDeleteSelect}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-s-custom"},on:{click:e.checkUserMatchRoleSelect}},[e._v("角色分配")])],1)],1)]),e._v(" "),o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","row-key":e.getRowKeys},on:{"row-dblclick":e.handledbClick,"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{"reserve-selection":"true",type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{label:"用户工号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.code))]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"用户名",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"password",label:"密码",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"departmentId.name",label:"所在部门",width:"100"}}),o("el-table-column",{attrs:{prop:"departmentId.companyId.name",label:"所在公司",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"sex",label:"性别",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sex?o("span",[e._v("男")]):0==t.row.sex?o("span",[e._v("女")]):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{formatter:e.formatDate,prop:"birthday",label:"生日",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"positionId.name",label:"职位","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"tel",label:"电话","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"other",label:"其他/微信","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"status",label:"是否启用","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?o("span",[o("el-tag",[e._v("是")])],1):0==t.row.status?o("span",[o("el-tag",{attrs:{type:"info"}},[e._v("否")])],1):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button-group",[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("增加")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-edit"},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(o){return e.checkDelete(t.row)}}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-s-custom"},on:{click:function(o){return e.selectOnetUser_RoleData(t.row)}}},[e._v("角色分配")])],1)]}}])})],1),e._v(" "),o("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("span",[e._v("确认删除？")]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.deleteUserData}},[e._v("确 定")])],1)]),e._v(" "),o("div",{staticClass:"page",staticStyle:{"margin-top":"50px"}},[o("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[5,6,7,8],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),o("div",{attrs:{id:"btn1"}},[o("el-dialog",{attrs:{title:"增加用户",visible:e.dialogFormVisible,width:"800px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"addForm",attrs:{rules:e.rules,model:e.addForm,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"用户名",prop:"name"}},[o("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"工号",prop:"code"}},[o("el-input",{model:{value:e.addForm.code,callback:function(t){e.$set(e.addForm,"code",t)},expression:"addForm.code"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"所属公司",prop:"companyId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.reflashDepartemntAdd()}},model:{value:e.addForm.companyId,callback:function(t){e.$set(e.addForm,"companyId",t)},expression:"addForm.companyId"}},e._l(e.companyIdAndName,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"部门",readonly:"true",prop:"departmentId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.addForm.departmentId,callback:function(t){e.$set(e.addForm,"departmentId",t)},expression:"addForm.departmentId"}},e._l(e.DepartmentIdAndName,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"性别",readonly:"true",prop:"sex"}},[o("el-radio-group",{model:{value:e.addForm.sex,callback:function(t){e.$set(e.addForm,"sex",t)},expression:"addForm.sex"}},[o("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("女")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"生日",readonly:"true",prop:"birthday"}},[o("el-date-picker",{attrs:{type:"date",size:"large",placeholder:"选择日期"},model:{value:e.addForm.birthday,callback:function(t){e.$set(e.addForm,"birthday",t)},expression:"addForm.birthday"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"职位",readonly:"true",prop:"positionId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.addForm.positionId,callback:function(t){e.$set(e.addForm,"positionId",t)},expression:"addForm.positionId"}},e._l(e.PositionIdAndName,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"角色",readonly:"true"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.addForm.roleIds,callback:function(t){e.$set(e.addForm,"roleIds",t)},expression:"addForm.roleIds"}},e._l(e.RoleIdAndNameOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"电话",readonly:"true",prop:"tel"}},[o("el-input",{model:{value:e.addForm.tel,callback:function(t){e.$set(e.addForm,"tel",t)},expression:"addForm.tel"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"邮箱",readonly:"true",prop:"email"}},[o("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"其他",readonly:"true"}},[o("el-input",{model:{value:e.addForm.other,callback:function(t){e.$set(e.addForm,"other",t)},expression:"addForm.other"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"备注",readonly:"true"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"是否启用",prop:"status"}},[o("el-radio-group",{model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},[o("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-left":"60%"}},[o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addSubmitForm()}}},[e._v("创建")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)],1),e._v(" "),o("div",{attrs:{id:"btn2"}},[o("el-dialog",{attrs:{title:"编辑用户",visible:e.dialogFormVisible2,width:"800px"},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[o("el-form",{ref:"modifyForm",attrs:{rules:e.rules,model:e.modifyForm,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"用户ID"}},[o("el-input",{attrs:{readonly:"true"},model:{value:e.modifyForm.id,callback:function(t){e.$set(e.modifyForm,"id",t)},expression:"modifyForm.id"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"用户名",prop:"name"}},[o("el-input",{model:{value:e.modifyForm.name,callback:function(t){e.$set(e.modifyForm,"name",t)},expression:"modifyForm.name"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"工号",prop:"code"}},[o("el-input",{model:{value:e.modifyForm.code,callback:function(t){e.$set(e.modifyForm,"code",t)},expression:"modifyForm.code"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{model:{value:e.modifyForm.password,callback:function(t){e.$set(e.modifyForm,"password",t)},expression:"modifyForm.password"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"所属公司",prop:"companyId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.reflashDepartemntModify()}},model:{value:e.modifyForm.companyId,callback:function(t){e.$set(e.modifyForm,"companyId",t)},expression:"modifyForm.companyId"}},e._l(e.companyIdAndName,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"部门",readonly:"true",prop:"departmentId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.modifyForm.departmentId,callback:function(t){e.$set(e.modifyForm,"departmentId",t)},expression:"modifyForm.departmentId"}},e._l(e.DepartmentIdAndName,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"性别",readonly:"true",prop:"sex"}},[o("el-radio-group",{model:{value:e.modifyForm.sex,callback:function(t){e.$set(e.modifyForm,"sex",t)},expression:"modifyForm.sex"}},[o("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("女")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"生日",readonly:"true",prop:"birthday"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日"},model:{value:e.modifyForm.birthday,callback:function(t){e.$set(e.modifyForm,"birthday",t)},expression:"modifyForm.birthday"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"职位",readonly:"true",prop:"positionId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.modifyForm.positionId,callback:function(t){e.$set(e.modifyForm,"positionId",t)},expression:"modifyForm.positionId"}},e._l(e.PositionIdAndName,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"角色",readonly:"true"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.modifyForm.roleIds,callback:function(t){e.$set(e.modifyForm,"roleIds",t)},expression:"modifyForm.roleIds"}},e._l(e.RoleIdAndNameOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"电话",readonly:"true",prop:"tel"}},[o("el-input",{model:{value:e.modifyForm.tel,callback:function(t){e.$set(e.modifyForm,"tel",t)},expression:"modifyForm.tel"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"邮箱",readonly:"true",prop:"email"}},[o("el-input",{model:{value:e.modifyForm.email,callback:function(t){e.$set(e.modifyForm,"email",t)},expression:"modifyForm.email"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"其他",readonly:"true"}},[o("el-input",{model:{value:e.modifyForm.other,callback:function(t){e.$set(e.modifyForm,"other",t)},expression:"modifyForm.other"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"备注",readonly:"true"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.modifyForm.remark,callback:function(t){e.$set(e.modifyForm,"remark",t)},expression:"modifyForm.remark"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"是否启用",prop:"status"}},[o("el-radio-group",{model:{value:e.modifyForm.status,callback:function(t){e.$set(e.modifyForm,"status",t)},expression:"modifyForm.status"}},[o("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-left":"60%"}},[o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateSubmitForm()}}},[e._v("保存")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("取消")])],1)],1)],1)],1)],1),e._v(" "),o("div",{attrs:{id:"Role_UserMatchPage"}},[o("el-dialog",{attrs:{title:"用户角色界面",visible:e.dialogRoleAndUserMatchingVisible,width:"70%"},on:{"update:visible":function(t){e.dialogRoleAndUserMatchingVisible=t}}},[o("div",{staticClass:"dataTree"},[o("div",{staticClass:"leftTree"},[o("h3",[e._v("用户")]),e._v(" "),e._l(e.userNames,function(t){return o("p",{key:t.id},[e._v(e._s(t.name))])})],2),e._v(" "),o("div",{staticClass:"rightTree"},[o("h3",[e._v("角色")]),e._v(" "),o("el-tree",{ref:"roleTree",attrs:{data:e.roleTree,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}})],1)]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogRoleAndUserMatchingVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.addUser_RoleData}},[e._v("保 存")])],1)])],1)],1)},staticRenderFns:[]};var l=o("VU/8")(i,r,!1,function(e){o("XUaG")},"data-v-4987dc0a",null).exports,d={data:function(){return{dataTree:"",RoleIdAndName:[],PositionIdAndName:[],RoleTree:"",companyIdAndName:[]}},components:{card:a.a,stable:l},methods:{getdataTree:function(){var e=this;this.$ajax.post("gateway/systemModule/doQueryUserNameTreeByCompanyId",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{}}}).then(function(t){e.dataTree=t.data.body.data},function(){console.log("error")})},getRoleIdAndNameByCompanyID:function(){var e=this;this.$ajax.post("gateway/systemModule/doQueryRoleIdAndNameByCompanyId",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{}}}).then(function(t){e.RoleIdAndName=t.data.body.data},function(){console.log("error")})},getCookie:function(){if(document.cookie.length>0)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var o=e[t].split("=");if("staffToken"==o[0])return o[1]}else alert("登录超时!"),this.$router.push({path:"/Login",name:"Login",params:{}})}},created:function(){this.getdataTree(),this.getRoleIdAndNameByCompanyID()}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"all"}},[o("div",{attrs:{id:"left"}},[o("card",{attrs:{title:"用户管理",dataTree:e.dataTree}})],1),e._v(" "),o("div",{attrs:{id:"right"}},[o("stable",{attrs:{RoleIdAndName:e.RoleIdAndName},on:{reflashTree:function(t){return e.getdataTree()}}})],1)])},staticRenderFns:[]};var s=o("VU/8")(d,n,!1,function(e){o("iypt")},"data-v-01e92037",null);t.default=s.exports},XUaG:function(e,t){},iypt:function(e,t){}});