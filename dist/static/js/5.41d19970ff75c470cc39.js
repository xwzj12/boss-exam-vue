webpackJsonp([5],{O9VD:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("Z0lD"),i={data:function(){return{dialogMatchingVisible:!1,data:[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}],defaultProps:{children:"children",label:"label"}}},methods:{getCheckedNodes:function(){console.log(this.$refs.tree.getCheckedNodes())},getCheckedKeys:function(){console.log(this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys())),console.log(this.$refs.tree.getHalfCheckedKeys()),console.log(this.$refs.tree.getCheckedKeys(!0))},setCheckedNodes:function(){this.$refs.tree.setCheckedNodes([{id:5,label:"二级 2-1"},{id:9,label:"三级 1-1-1"}])},setCheckedKeys:function(){this.$refs.tree.setCheckedKeys([3,7])},resetChecked:function(){this.$refs.tree.setCheckedKeys([])}}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"matchPage"}},[o("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogMatchingVisible=!0}}},[e._v("打开嵌套表单的 Dialog")]),e._v(" "),o("el-dialog",{attrs:{title:"收货地址",visible:e.dialogMatchingVisible},on:{"update:visible":function(t){e.dialogMatchingVisible=t}}},[o("div",{attrs:{id:"dataTree"}},[o("div",{attrs:{id:"leftTree"}},[o("h3",[e._v("角色")]),e._v(" "),o("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}})],1),e._v(" "),o("div",{attrs:{id:"rightTree"}},[o("h3",[e._v("资源")]),e._v(" "),o("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}})],1),e._v(" "),o("div",{staticClass:"buttons"},[o("el-button",{on:{click:e.getCheckedNodes}},[e._v("通过 node 获取")]),e._v(" "),o("el-button",{on:{click:e.getCheckedKeys}},[e._v("通过 key 获取")]),e._v(" "),o("el-button",{on:{click:e.setCheckedNodes}},[e._v("通过 node 设置")]),e._v(" "),o("el-button",{on:{click:e.setCheckedKeys}},[e._v("通过 key 设置")]),e._v(" "),o("el-button",{on:{click:e.resetChecked}},[e._v("清空")])],1),e._v(" "),o("br")]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("保 存")])],1)]),e._v(" "),o("div",{attrs:{id:"Role_ResourceMatchPage"}},[o("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogMatchingVisible=!0}}},[e._v("打开嵌套表单的 Dialog")]),e._v(" "),o("el-dialog",{attrs:{title:"收货地址",visible:e.dialogMatchingVisible},on:{"update:visible":function(t){e.dialogMatchingVisible=t}}},[o("div",{attrs:{id:"dataTree"}},[o("div",{attrs:{id:"leftTree"}},[o("h3",[e._v("角色")]),e._v(" "),o("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}})],1),e._v(" "),o("div",{attrs:{id:"rightTree"}},[o("h3",[e._v("资源")]),e._v(" "),o("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}})],1),e._v(" "),o("div",{staticClass:"buttons"},[o("el-button",{on:{click:e.getCheckedNodes}},[e._v("通过 node 获取")]),e._v(" "),o("el-button",{on:{click:e.getCheckedKeys}},[e._v("通过 key 获取")]),e._v(" "),o("el-button",{on:{click:e.setCheckedNodes}},[e._v("通过 node 设置")]),e._v(" "),o("el-button",{on:{click:e.setCheckedKeys}},[e._v("通过 key 设置")]),e._v(" "),o("el-button",{on:{click:e.resetChecked}},[e._v("清空")])],1),e._v(" "),o("br")]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("保 存")])],1)])],1)],1)},staticRenderFns:[]};o("VU/8")(i,r,!1,function(e){o("Xuj1")},"data-v-1793f7e5",null).exports;var l={data:function(){return{tableData:[],multipleSelection:[],dialogTableVisible2:!1,dialogFormVisible2:!1,dialogTableVisible:!1,dialogFormVisible:!1,modifyForm:{id:"",companyId:"",orgId:"",name:"",code:"",remark:"",status:"",version:""},formLabelWidth:"120px",addForm:{id:"",companyId:"",orgId:"",name:"",code:"",remark:"",status:"",version:""},page:1,pageSize:5,name:"",count:0,param:"",paramType:"",dialogVisible:!1,deleteId:"",deleteVersion:-1,dialogRoleAndResourceMatchingVisible:!1,dialogRoleAndUserMatchingVisible:!1,userTree:"",resourceTree:"",roleNames:[],rules:{name:[{required:!0,message:"请输入角色名",trigger:"blur"}],code:[{required:!0,message:"请输入角色编号!",trigger:"blur"}],status:[{required:!0,message:"请选择是否启用!",trigger:"change"}],orgId:[{required:!0,message:"请选择组织机构!",trigger:"change"}],companyId:[{required:!0,message:"请选择公司!",trigger:"change"}]},orgId:null,orgName:null,companyId:null,companyName:null,companyIdAndName:[],organizationIdAndName:[],roleComapnyId:null,code:null,username:null}},methods:{evaluationModifyForm:function(e){void 0!=this.$refs.modifyForm&&this.$refs.modifyForm.clearValidate(),this.modifyForm.id=e.id,1!=this.organizationIdAndName.length&&this.getCompanyIdAndNameByOrgId(e.orgId.id),null!=e.companyId?this.modifyForm.companyId=e.companyId.id:this.modifyForm.companyId=null,null!=e.orgId?this.modifyForm.orgId=e.orgId.id:this.modifyForm.orgId=null,this.modifyForm.name=e.name,this.modifyForm.code=e.code,this.modifyForm.remark=e.remark,this.modifyForm.version=e.version,this.modifyForm.status=e.status},getRowKeys:function(e){return e.id},createUniqueId:function(){var e=function(){return Number(Math.random().toString().substr(2)).toString(36)},t=[];function o(){var a=e(),i=!1;t.forEach(function(e){e===a&&(i=!0)}),i?o():t.push(a)}for(var a=0;a<1;)o(),a++;return this.uniqueId=t[0],t[0]},handleEdit:function(e,t){this.dialogFormVisible2=!0,this.dialogTableVisible2=!0,this.evaluationModifyForm(t)},handledbClick:function(e,t,o){this.handleEdit(0,e)},getdata:function(){var e=this;this.$ajax.post("gateway/systemModule/doQueryRoleByPage",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{name:this.name,page:this.page,pageSize:this.pageSize}}}).then(function(t){e.count=t.data.body.data.count,e.tableData=t.data.body.data.roleList},function(){console.log("error")})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.pageSize=e,this.getdata()},handleCurrentChange:function(e){this.page=e,this.getdata()},queryDataByName:function(){this.page=1,this.getdata()},checkModifySelectOne:function(){1==this.multipleSelection.length?(this.dialogFormVisible2=!0,this.evaluationModifyForm(this.multipleSelection[0])):0==this.multipleSelection.length?alert("未选中任何角色！"):alert("该操作只能选择一个角色！")},updateRoleData:function(){var e=this;this.$ajax.post("gateway/systemModule/doUpdateRole",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{id:this.modifyForm.id,companyId:this.modifyForm.companyId,orgId:this.modifyForm.orgId,name:this.modifyForm.name,code:this.modifyForm.code,remark:this.modifyForm.remark,status:this.modifyForm.status,version:this.modifyForm.version}}}).then(function(t){alert(t.data.head.message),"0"==t.data.head.responseCode&&(e.$refs.multipleTable.clearSelection(),e.dialogFormVisible2=!1,e.reflashTree(),e.getdata())},function(){alert("保存失败"),console.log("error")})},clearAddForm:function(){void 0!=this.$refs.addForm&&this.$refs.addForm.clearValidate(),this.addForm.id="",this.addForm.companyId="",this.addForm.name="",this.addForm.code=this.createUniqueId(),this.addForm.remark="",this.addForm.version="",this.addForm.status="",1==this.organizationIdAndName.length?this.addForm.orgId=this.organizationIdAndName[0].value:(this.addForm.orgId="",this.companyIdAndName=[]),this.dialogFormVisible=!0},addRoleData:function(){var e=this;this.$ajax.post("gateway/systemModule/doAddRole",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{companyId:this.addForm.companyId,orgId:this.addForm.orgId,name:this.addForm.name,code:this.addForm.code,remark:this.addForm.remark,status:this.addForm.status}}}).then(function(t){alert(t.data.head.message),"0"==t.data.head.responseCode&&(e.dialogFormVisible=!1,e.reflashTree(),e.getdata())},function(){alert("增加失败"),console.log("error")})},checkDelete:function(e){this.deleteId=e.id,this.deleteVersion=e.version,this.dialogVisible=!0},deleteRoleData:function(){var e=this;this.dialogVisible=!1,this.$ajax.post("gateway/systemModule/doDeleteRole",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{id:this.deleteId,version:this.deleteVersion}}}).then(function(t){"0"==t.data.head.responseCode?(alert(t.data.head.message),e.$refs.multipleTable.clearSelection(),e.reflashTree(),e.getdata()):e.$message({type:"error",message:t.data.head.message,duration:3e3,showClose:!0})},function(){alert("删除失败"),console.log("error")})},checkDeleteSelect:function(){var e=this;0==this.multipleSelection.length?alert("未选中任何角色"):this.$confirm("确定删除选中数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.multipleSelection.forEach(function(e){t.push({id:e.id,version:e.version})}),e.$ajax.post("gateway/systemModule/doDeleteRoleList",{head:{version:"1",token:e.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{roleList:t}}}).then(function(t){"0"==t.data.head.responseCode?(alert(t.data.head.message),e.$refs.multipleTable.clearSelection(),e.reflashTree(),e.getdata()):e.$message({type:"error",message:t.data.head.message,duration:3e3,showClose:!0})},function(){alert("删除失败"),console.log("error")})}).catch(function(){})},reflashTree:function(){this.$emit("reflashTree")},formatDate:function(e,t){if(null!=e[t.property]){var o=e[t.property],a=new Date(o);return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()}},getRole_ResourceDataByRoleID:function(e){var t=this;this.$ajax.post("gateway/systemModule/doQueryResource_RoleLeafByRoleId",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{roleId:e}}}).then(function(e){var o=[];t.$refs.resourceTree.setCheckedKeys(o),e.data.body.data.forEach(function(e){o.push(e.resourceId)}),t.$refs.resourceTree.setCheckedKeys(o)},function(){alert("error"),console.log("error")})},checkRoleMatchResourceSelect:function(){var e=this;0==this.multipleSelection.length?alert("请至少选择一行数据！"):(this.getResourceTree(),this.roleNames=[],this.multipleSelection.forEach(function(t){e.roleNames.push({name:t.name,id:t.id})}),this.dialogRoleAndResourceMatchingVisible=!0,1==this.multipleSelection.length?this.getRole_ResourceDataByRoleID(this.multipleSelection[0].id):this.$refs.resourceTree.setCheckedKeys([]))},addResource_RoleData:function(){var e=this,t=this.$refs.resourceTree.getCheckedKeys().concat(this.$refs.resourceTree.getHalfCheckedKeys()),o=[];this.roleNames.forEach(function(e){o.push(e.id)}),this.$ajax.post("gateway/systemModule/doAddResource_Role",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{roleIds:o,resourceIds:t}}}).then(function(t){alert(t.data.head.message),e.dialogRoleAndResourceMatchingVisible=!1},function(){alert("error"),console.log("error")})},selectOnetResouce_RoleData:function(e){this.getResourceTree(),this.dialogRoleAndResourceMatchingVisible=!0,this.roleNames=[],this.roleNames.push({name:e.name,id:e.id}),this.getRole_ResourceDataByRoleID(e.id)},getRole_UserDataByRoleID:function(e){var t=this;this.$ajax.post("gateway/systemModule/doQueryUser_RoleLeafByRoleId",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{roleId:e}}}).then(function(e){var o=[];t.$refs.userTree.setCheckedKeys(o),e.data.body.data.forEach(function(e){o.push(e.userId)}),t.$refs.userTree.setCheckedKeys(o)},function(){alert("error"),console.log("error")})},getResourceTree:function(){var e=this;this.$ajax.post("gateway/systemModule/doQueryResourceNameTree",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{}}}).then(function(t){e.resourceTree=t.data.body.data},function(){console.log("error")})},getUserTree:function(e){var t=this;this.roleComapnyId=e,this.$ajax.post("gateway/systemModule/doQueryDepartmentUserNameTreeByCompanyIdAndUserNameAndCode",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{companyId:e,name:this.username,code:this.code}}}).then(function(e){t.userTree=e.data.body.data,console.log(t.userTree)},function(){console.log("error")})},queryUserDataByNameAndCode:function(){this.getUserTree(this.roleComapnyId)},checkRoleMatchUserSelect:function(){var e=this;if(0==this.multipleSelection.length)alert("请至少选择一行数据！");else{this.roleNames=[],this.multipleSelection.forEach(function(t){e.roleNames.push({name:t.name,id:t.id})});for(var t,o=0,a=0;a<this.multipleSelection.length-1;a++)if(1!=o)for(var i=a+1;i<this.multipleSelection.length;i++)1!=o&&(null!=this.multipleSelection[a].companyId&&null!=this.multipleSelection[i].companyId?this.multipleSelection[a].companyId.id!=this.multipleSelection[i].companyId.id&&(o=1):o=1);if(1==o)return void alert("请不要选择多个不同公司的角色");this.username=null,this.code=null,t=null!=this.multipleSelection[0].companyId?this.multipleSelection[0].companyId.id:null,this.getUserTree(t),this.dialogRoleAndUserMatchingVisible=!0,1==this.multipleSelection.length?this.getRole_UserDataByRoleID(this.multipleSelection[0].id):this.$refs.userTree.setCheckedKeys([])}},addUser_RoleData:function(){var e=this,t=this.$refs.userTree.getCheckedKeys(!0),o=[];this.roleNames.forEach(function(e){o.push(e.id)}),this.$ajax.post("gateway/systemModule/doAddNewRoleToUser",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{roleIds:o,userIds:t}}}).then(function(t){alert(t.data.head.message),e.dialogRoleAndUserMatchingVisible=!1},function(){alert("error"),console.log("error")})},selectOnetUser_RoleData:function(e){this.username=null,this.code=null,null!=e.companyId?this.getUserTree(e.companyId.id):this.getUserTree(null),this.dialogRoleAndUserMatchingVisible=!0,this.roleNames=[],this.roleNames.push({name:e.name,id:e.id}),this.getRole_UserDataByRoleID(e.id)},updateSubmitForm:function(){var e=this;this.$refs.modifyForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.updateRoleData()})},addSubmitForm:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.addRoleData()})},getOrgIdAndName:function(){var e=this;this.$ajax.post("gateway/systemModule/doQueryOrgIdAndName",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{}}}).then(function(t){e.organizationIdAndName=t.data.body.data,1==e.organizationIdAndName.length&&e.getCompanyIdAndNameByOrgId(e.organizationIdAndName[0].value)},function(){console.log("error")})},getCompanyIdAndNameByOrgId:function(e){var t=this;this.$ajax.post("gateway/systemModule/doQueryCompanyNameAndIdByOrgId",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{orgId:e}}}).then(function(e){t.companyIdAndName=e.data.body.data},function(){console.log("error")})},reflashAdd:function(){this.getCompanyIdAndNameByOrgId(this.addForm.orgId),this.addForm.companyId=null},reflashModify:function(){this.getCompanyIdAndNameByOrgId(this.modifyForm.orgId),this.modifyForm.companyId=null},getCookie:function(){if(document.cookie.length>0)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var o=e[t].split("=");if("staffToken"==o[0])return o[1]}else alert("登录超时!"),this.$router.push({path:"/Login",name:"Login",params:{}})}},components:{},props:[],created:function(){this.getdata(),this.getOrgIdAndName()}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticStyle:{float:"left","margin-bottom":"20px"}},[o("div",{attrs:{id:"selector"}},[o("span",[e._v("角色名称:")]),e._v(" "),o("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.queryDataByName()}}},[e._v("搜索")])],1),e._v(" "),o("div",{staticStyle:{float:"left"}},[o("el-button-group",[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.clearAddForm}},[e._v("增加")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-edit"},on:{click:e.checkModifySelectOne}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:e.checkDeleteSelect}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-circle-plus-outline"},on:{click:e.checkRoleMatchResourceSelect}},[e._v("资源分配")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-user"},on:{click:e.checkRoleMatchUserSelect}},[e._v("用户分配")])],1)],1)]),e._v(" "),o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","row-key":e.getRowKeys},on:{"row-dblclick":e.handledbClick,"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{"reserve-selection":"true",type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{label:"角色",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"code",label:"角色编号",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"remark",label:"角色备注",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"companyId.name",label:"所属公司",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"orgId.name",label:"所属机构",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"status",label:"启用标记",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?o("span",[o("el-tag",[e._v("是")])],1):0==t.row.status?o("span",[o("el-tag",{attrs:{type:"info"}},[e._v("否")])],1):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"500px"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button-group",[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.clearAddForm}},[e._v("增加")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-edit"},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(o){return e.checkDelete(t.row)}}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-circle-plus-outline"},on:{click:function(o){return e.selectOnetResouce_RoleData(t.row)}}},[e._v("资源分配")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-user"},on:{click:function(o){return e.selectOnetUser_RoleData(t.row)}}},[e._v("用户分配")])],1)]}}])})],1),e._v(" "),o("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("span",[e._v("确认删除？")]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.deleteRoleData}},[e._v("确 定")])],1)]),e._v(" "),o("div",{staticClass:"page",staticStyle:{"margin-top":"50px"}},[o("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[5,6,7,8],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),o("div",{attrs:{id:"btn1"}},[o("el-dialog",{attrs:{title:"增加角色",visible:e.dialogFormVisible,width:"800px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"100px",rules:e.rules}},[o("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[o("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"角色编号",prop:"code"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.addForm.code,callback:function(t){e.$set(e.addForm,"code",t)},expression:"addForm.code"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"角色备注",readonly:"true"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"所属机构",prop:"orgId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.reflashAdd()}},model:{value:e.addForm.orgId,callback:function(t){e.$set(e.addForm,"orgId",t)},expression:"addForm.orgId"}},e._l(e.organizationIdAndName,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"所属公司",prop:"companyId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.addForm.companyId,callback:function(t){e.$set(e.addForm,"companyId",t)},expression:"addForm.companyId"}},e._l(e.companyIdAndName,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"是否启用",prop:"status"}},[o("el-radio-group",{model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},[o("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-left":"60%"}},[o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addSubmitForm()}}},[e._v("创建")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)],1),e._v(" "),o("div",{attrs:{id:"btn2"}},[o("el-dialog",{attrs:{title:"编辑角色",visible:e.dialogFormVisible2,width:"800px"},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[o("el-form",{ref:"modifyForm",attrs:{model:e.modifyForm,"label-width":"100px",rules:e.rules}},[o("el-form-item",{attrs:{label:"角色ID"}},[o("el-input",{attrs:{readonly:"true"},model:{value:e.modifyForm.id,callback:function(t){e.$set(e.modifyForm,"id",t)},expression:"modifyForm.id"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[o("el-input",{model:{value:e.modifyForm.name,callback:function(t){e.$set(e.modifyForm,"name",t)},expression:"modifyForm.name"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"角色编号",prop:"code"}},[o("el-input",{model:{value:e.modifyForm.code,callback:function(t){e.$set(e.modifyForm,"code",t)},expression:"modifyForm.code"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"角色备注",readonly:"true"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.modifyForm.remark,callback:function(t){e.$set(e.modifyForm,"remark",t)},expression:"modifyForm.remark"}},[e._v("{{}}")])],1),e._v(" "),o("el-form-item",{attrs:{label:"所属机构",prop:"orgId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.reflashModify()}},model:{value:e.modifyForm.orgId,callback:function(t){e.$set(e.modifyForm,"orgId",t)},expression:"modifyForm.orgId"}},e._l(e.organizationIdAndName,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"所属公司",prop:"companyId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.modifyForm.companyId,callback:function(t){e.$set(e.modifyForm,"companyId",t)},expression:"modifyForm.companyId"}},e._l(e.companyIdAndName,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"是否启用",prop:"status"}},[o("el-radio-group",{model:{value:e.modifyForm.status,callback:function(t){e.$set(e.modifyForm,"status",t)},expression:"modifyForm.status"}},[o("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-left":"60%"}},[o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateSubmitForm()}}},[e._v("保存")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("取消")])],1)],1)],1)],1)],1),e._v(" "),o("div",{attrs:{id:"Role_ResourceMatchPage"}},[o("el-dialog",{attrs:{title:"角色资源界面",visible:e.dialogRoleAndResourceMatchingVisible,width:"70%"},on:{"update:visible":function(t){e.dialogRoleAndResourceMatchingVisible=t}}},[o("div",{staticClass:"dataTree"},[o("div",{staticClass:"leftTree"},[o("h2",[e._v("角色")]),e._v(" "),e._l(e.roleNames,function(t,a){return o("p",{key:a},[e._v(e._s(t.name))])})],2),e._v(" "),o("div",{staticClass:"rightTree"},[o("h2",[e._v("资源")]),e._v(" "),o("el-tree",{ref:"resourceTree",attrs:{data:e.resourceTree,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}})],1)]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogRoleAndResourceMatchingVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.addResource_RoleData}},[e._v("保存")])],1)])],1),e._v(" "),o("div",{attrs:{id:"Role_UserMatchPage"}},[o("el-dialog",{attrs:{title:"角色用户界面",visible:e.dialogRoleAndUserMatchingVisible,width:"70%"},on:{"update:visible":function(t){e.dialogRoleAndUserMatchingVisible=t}}},[o("div",{staticClass:"dataTree"},[o("div",{staticStyle:{width:"100%","padding-left":"0%","margin-bottom":"20px"}},[o("span",{staticStyle:{"font-size":"15px"}},[e._v("用户名:")]),o("el-input",{staticStyle:{width:"30%"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),o("span",{staticStyle:{"font-size":"15px"}},[e._v("工号:")]),o("el-input",{staticStyle:{width:"30%"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.queryUserDataByNameAndCode()}}},[e._v("搜索")])],1),e._v(" "),o("div",{staticClass:"leftTree"},[o("h3",[e._v("角色")]),e._v(" "),e._l(e.roleNames,function(t){return o("p",{key:t.id},[e._v(e._s(t.name))])})],2),e._v(" "),o("div",{staticClass:"rightTree"},[o("h3",[e._v("用户")]),e._v(" "),o("el-tree",{ref:"userTree",attrs:{data:e.userTree,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}})],1)]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogRoleAndUserMatchingVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.addUser_RoleData}},[e._v("保 存")])],1)])],1)],1)},staticRenderFns:[]};var s=o("VU/8")(l,n,!1,function(e){o("h0jC")},"data-v-4d9457d9",null).exports,d={data:function(){return{dataTree:"",companyIdAndName:"",organizationIdAndName:"",resourceTree:"",userTree:""}},components:{card:a.a,stable:s},methods:{getdataTree:function(){var e=this;this.$ajax.post("gateway/systemModule/doQueryCompanyRoleTree",{head:{version:"1",token:this.getCookie(),businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{}}}).then(function(t){e.dataTree=t.data.body.data},function(){console.log("error")})},getCookie:function(){if(document.cookie.length>0)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var o=e[t].split("=");if("staffToken"==o[0])return o[1]}else alert("登录超时!"),this.$router.push({path:"/Login",name:"Login",params:{}})}},created:function(){this.getdataTree()}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"all"}},[o("div",{attrs:{id:"left"}},[o("card",{attrs:{title:"角色管理",dataTree:e.dataTree}})],1),e._v(" "),o("div",{attrs:{id:"right"}},[o("stable",{on:{reflashTree:function(t){return e.getdataTree()}}})],1)])},staticRenderFns:[]};var u=o("VU/8")(d,c,!1,function(e){o("i1u/")},"data-v-e9f21f5a",null);t.default=u.exports},Xuj1:function(e,t){},h0jC:function(e,t){},"i1u/":function(e,t){}});