webpackJsonp([28],{CiiF:function(e,a){},sXxB:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("Xxa5"),s=t.n(r),n=t("BO1k"),i=t.n(n),c=t("exGp"),o=t.n(c),u=t("zL8q"),p={data:function(){return{examStatus:"",paperData:"",examRecord:"",examData:"",endTimeLeft:0,myAnswers:{},myScore:"",realScore:"",myEvaluate:"",evaluateText:"",isMarkingStopTime:!1}},mounted:function(){var e=u.Loading.service();this.examData=this.$store.getters.getExamData,this.getPaper(),this.doqueryMarkingStopTime(),e.close()},methods:{getPaper:function(){var e=this;return o()(s.a.mark(function a(){var t,r,n,c,o,u,p;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$http.post("/gateway/exam/paper/goPaper",{head:{version:"1",token:e.$store.getters.getToken,businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{examPublishRecordId:e.examData.examPublishRecordId,examUserId:e.examData.examinerCode}}});case 2:for(t=a.sent,e.paperData=t.body.data,console.log(e.paperData),e.examStatus=e.$store.getters.getExamData.status,r=!0,n=!1,c=void 0,a.prev=9,o=i()(e.paperData.subjects);!(r=(u=o.next()).done);r=!0)"367183204926050304"===(p=u.value).subjectTypeId?p.myAnswer="":"413215621381836800"===p.subjectTypeId?p.myAnswer=[]:(p.subjectTypeId,p.myAnswer="");a.next=17;break;case 13:a.prev=13,a.t0=a.catch(9),n=!0,c=a.t0;case 17:a.prev=17,a.prev=18,!r&&o.return&&o.return();case 20:if(a.prev=20,!n){a.next=23;break}throw c;case 23:return a.finish(20);case 24:return a.finish(17);case 25:e.restoreAnswer();case 26:case"end":return a.stop()}},a,e,[[9,13,17,25],[18,,20,24]])}))()},restoreAnswer:function(){var e=this;return o()(s.a.mark(function a(){var t,r,n,c,o,u,p,d,l,v,m,x,y,b,h,f,w,k,_,g,T;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$http.post("/gateway/exam/exam/restoreAnswer",{head:{version:"1",token:e.$store.getters.getToken,businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:e.examData.examid}});case 2:if(t=a.sent,0==(r=t.body.data).length){a.next=71;break}n=!0,c=!1,o=void 0,a.prev=8,u=i()(e.paperData.subjects);case 10:if(n=(p=u.next()).done){a.next=57;break}if("413215621381836800"!==(d=p.value).subjectTypeId){a.next=35;break}for(l=[],v=!0,m=!1,x=void 0,a.prev=17,y=i()(r);!(v=(b=y.next()).done);v=!0)(h=b.value).paperSubjectId===d.id&&l.push(h.myAnswer),d.myAnswer=l;a.next=25;break;case 21:a.prev=21,a.t0=a.catch(17),m=!0,x=a.t0;case 25:a.prev=25,a.prev=26,!v&&y.return&&y.return();case 28:if(a.prev=28,!m){a.next=31;break}throw x;case 31:return a.finish(28);case 32:return a.finish(25);case 33:a.next=54;break;case 35:for(f=!0,w=!1,k=void 0,a.prev=38,_=i()(r);!(f=(g=_.next()).done);f=!0)(T=g.value).paperSubjectId===d.id&&(d.myAnswer=T.myAnswer);a.next=46;break;case 42:a.prev=42,a.t1=a.catch(38),w=!0,k=a.t1;case 46:a.prev=46,a.prev=47,!f&&_.return&&_.return();case 49:if(a.prev=49,!w){a.next=52;break}throw k;case 52:return a.finish(49);case 53:return a.finish(46);case 54:n=!0,a.next=10;break;case 57:a.next=63;break;case 59:a.prev=59,a.t2=a.catch(8),c=!0,o=a.t2;case 63:a.prev=63,a.prev=64,!n&&u.return&&u.return();case 66:if(a.prev=66,!c){a.next=69;break}throw o;case 69:return a.finish(66);case 70:return a.finish(63);case 71:case"end":return a.stop()}},a,e,[[8,59,63,71],[17,21,25,33],[26,,28,32],[38,42,46,54],[47,,49,53],[64,,66,70]])}))()},doBackUpAnswer:function(){var e=this;return o()(s.a.mark(function a(){var t,r,n,c,o,u,p,d;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(e.myAnswers.examUserId=e.examData.examinerCode,e.myAnswers.examRecordId=e.examData.examid,e.myAnswers.examPublishId=e.examData.examPublishRecordId,t=[],console.log(e.paperData.subjects),r=!0,n=!1,c=void 0,a.prev=8,o=i()(e.paperData.subjects);!(r=(u=o.next()).done);r=!0)"415836603560972288"===(p=u.value).subjectTypeId&&t.push({paperSubjectId:p.id,myAnswer:p.myAnswer,score:p.Score,evaluate:p.myEvaluate});a.next=16;break;case 12:a.prev=12,a.t0=a.catch(8),n=!0,c=a.t0;case 16:a.prev=16,a.prev=17,!r&&o.return&&o.return();case 19:if(a.prev=19,!n){a.next=22;break}throw c;case 22:return a.finish(19);case 23:return a.finish(16);case 24:return e.myAnswers.records=t,console.log(t),a.next=28,e.$http.post("/gateway/exam/evaluate/saveScore",{head:{version:"1",token:e.$store.getters.getToken,businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:e.myAnswers}});case 28:d=a.sent,e.sumbitEvaluate(),d&&e.$message.success("提交总评成功,跳转回主页面！");case 31:case"end":return a.stop()}},a,e,[[8,12,16,24],[17,,19,23]])}))()},doqueryMarkingStopTime:function(){var e=this;return o()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$http.post("/gateway/exam/evaluate/queryMarkingStopTime",{head:{version:"1",token:e.$store.getters.getToken,businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{examRecordId:e.examData.examPublishRecordId}}});case 2:!1===a.sent.body.data&&1===e.examData.status&&(e.isMarkingStopTime=!0,e.$message.success("未曾批阅且阅卷时间已过,不得开始批阅！"));case 4:case"end":return a.stop()}},a,e)}))()},sumbitEvaluate:function(){var e=this;return o()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:""===e.evaluateText?alert("请总评一下吧！"):(e.$http.post("/gateway/exam/evaluate/sumbitEvaluate",{head:{version:"1",token:e.$store.getters.getToken,businessType:"12",equipId:"1",equipType:1,encrypt:1},body:{data:{examPublishRecordId:e.examData.examPublishRecordId,examinerCode:e.examData.examinerCode,id:e.examData.examid,evaluate:e.evaluateText,PaperVo:e.paperData}}}),e.$message.success("提交总评成功,跳转回主页面！"),e.$router.push({path:"/exam/Judge"}));case 1:case"end":return a.stop()}},a,e)}))()}}},d={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"body"},[t("h1",[e._v("博思考试系统")]),e._v(" "),t("h3",{staticStyle:{color:"blue"}},[e._v("考试阅卷")]),e._v(" "),t("div",[t("el-card",[t("p",[e._v("本场考试编号："+e._s(e.examData.examPublishRecordId))]),e._v(" "),t("p",[e._v("本场考试名称："+e._s(e.examData.title))]),e._v(" "),t("p",[e._v("本场考试记录编号："+e._s(e.examData.examid))]),e._v(" "),t("p",[e._v("考试人员编号："+e._s(e.examData.examinerCode))]),e._v(" "),t("p",[e._v("考试人员："+e._s(e.examData.examiner))])]),e._v(" "),e.isMarkingStopTime?t("div",e._l(e.paperData.subjects,function(a){return t("el-card",{key:a.id},[t("div",[t("p",[t("span",{staticStyle:{color:"red"}},[e._v("\n              ("+e._s(a.score)+"分\n              "+e._s("367183204926050304"===a.subjectTypeId?"单选题":"413215621381836800"===a.subjectTypeId?"多选题":"判断题")+")\n            ")]),e._v(" "),t("span",[e._v(e._s(a.subject))])]),e._v(" "),"367183204926050304"===a.subjectTypeId||"411526617355735040"===a.subjectTypeId?t("div",[t("el-radio-group",{model:{value:a.myAnswer,callback:function(t){e.$set(a,"myAnswer",t)},expression:"item.myAnswer"}},e._l(a.answers,function(a){return t("el-radio",{key:a.id,attrs:{label:a.id,disabled:""}},[e._v(e._s(a.answer))])}),1)],1):"413215621381836800"===a.subjectTypeId?t("div",[t("el-checkbox-group",{model:{value:a.myAnswer,callback:function(t){e.$set(a,"myAnswer",t)},expression:"item.myAnswer"}},e._l(a.answers,function(a){return t("el-checkbox",{key:a.id,attrs:{label:a.id,disabled:""}},[e._v(e._s(a.answer))])}),1)],1):"415836603560972288"===a.subjectTypeId?t("div",[a.myAnswer?t("img",{staticClass:"avatar",attrs:{src:a.myAnswer}}):e._e()]):e._e()])])}),1):e._e(),e._v(" "),e.isMarkingStopTime?e._e():t("div",[e._l(e.paperData.subjects,function(a){return t("el-card",{key:a.id},[t("div",[t("p",[t("span",{staticStyle:{color:"red"}},[e._v(" ("+e._s(a.score)+"分 ")]),e._v(" "),t("span",[e._v(e._s(a.subject))])]),e._v(" "),"367183204926050304"===a.subjectTypeId||"411526617355735040"===a.subjectTypeId?t("div",[t("el-radio-group",{model:{value:a.myAnswer,callback:function(t){e.$set(a,"myAnswer",t)},expression:"item.myAnswer"}},e._l(a.answers,function(a){return t("el-radio",{key:a.id,attrs:{label:a.id,disabled:""}},[e._v(e._s(a.answer))])}),1)],1):"413215621381836800"===a.subjectTypeId?t("div",[t("el-checkbox-group",{model:{value:a.myAnswer,callback:function(t){e.$set(a,"myAnswer",t)},expression:"item.myAnswer"}},e._l(a.answers,function(a){return t("el-checkbox",{key:a.id,attrs:{label:a.id,disabled:""}},[e._v(e._s(a.answer))])}),1)],1):"415836603560972288"===a.subjectTypeId?t("div",[a.myAnswer?t("img",{staticClass:"avatar",attrs:{src:a.myAnswer}}):e._e(),e._v(" "),t("div",{staticClass:" score"},[t("el-input",{attrs:{placeholder:"请阅卷官打分(不得超过满分!超过满分，默认满分！)",type:"number",min:"0",maxlength:1,max:a.score,onkeyup:"this.value=this.value.replace(/[^\\d.]/g,'');",oninput:"if(this.value>=this.max||this.value.length>1) this.value=this.max",disabled:e.isMarkingStopTime},on:{change:function(t){return e.check(a.Score,a.score)}},model:{value:a.Score,callback:function(t){e.$set(a,"Score",t)},expression:"item.Score"}})],1),e._v(" "),t("el-input",{attrs:{placeholder:"请阅卷官评价",type:"textarea",rows:4,disabled:e.isMarkingStopTime},model:{value:a.myEvaluate,callback:function(t){e.$set(a,"myEvaluate",t)},expression:"item.myEvaluate"}})],1):e._e()])])}),e._v(" "),t("el-card",[t("el-input",{attrs:{placeholder:"请阅卷官评价",type:"textarea",rows:4,disabled:e.isMarkingStopTime},model:{value:e.evaluateText,callback:function(a){e.evaluateText=a},expression:"evaluateText"}})],1),e._v(" "),t("el-button",{on:{click:function(a){return e.doBackUpAnswer()}}},[e._v("提交")])],2)],1)])},staticRenderFns:[]};var l=t("VU/8")(p,d,!1,function(e){t("CiiF")},"data-v-5abb5838",null);a.default=l.exports}});